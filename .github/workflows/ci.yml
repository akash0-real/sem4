name: App dev CI
on:
  push:
    branches: [main]
    paths:
      - 'Mobile-Application-development/**'
      - '.github/workflows/ci.yml'
  pull_request:
    branches: [main]
    paths:
      - 'Mobile-Application-development/**'
      - '.github/workflows/ci.yml'
jobs:
  verify-code:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install & Verify Each Lab
        run: |
          for dir in Mobile-Application-development/*; do
            if [ -f "$dir/package.json" ]; then
              echo "Running CI in $dir"
              cd $dir
              npm ci
              npm run lint || true
              npm run type-check || true
              npm test -- --coverage --watchAll=false || true
              cd -
            fi
          done
